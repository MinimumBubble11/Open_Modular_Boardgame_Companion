"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _ColorConsole = _interopRequireDefault(require("../ColorConsole"));
var _PositionError = _interopRequireDefault(require("../data/PositionError"));
var _ILog = require("../interface/ILog");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * 包装回调函数
 */
class WrapCallback {
  /**
   * 包装日志回调函数
   * @param onLog
   * @returns
   */
  static wrapOnLog(onLog) {
    return log => {
      // 1. 传递给外部log
      onLog(log);
      // 2. 对throw和error进行错误抛出
      const {
        level,
        message,
        position
      } = log;
      if (level === _ILog.Loglevel.ERROR || level === _ILog.Loglevel.THROW) {
        if (position) {
          throw new _PositionError.default(position, _ColorConsole.default.createMessage(message));
        }
        throw new Error(_ColorConsole.default.createMessage(message));
      }
    };
  }
}
var _default = exports.default = WrapCallback;