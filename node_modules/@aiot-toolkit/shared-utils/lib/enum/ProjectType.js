"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _path = _interopRequireDefault(require("path"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * 项目类型
 */
var ProjectType = /*#__PURE__*/function (ProjectType) {
  ProjectType["VELA_UX"] = "velaUx";
  ProjectType["ANDDROID_UX"] = "androidUx";
  ProjectType["VELA_XTS"] = "velaXts";
  return ProjectType;
}(ProjectType || {});
(function (_ProjectType) {
  function getProjectType(projectPath) {
    let src = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'src';
    const isXts = _fsExtra.default.existsSync(_path.default.resolve(projectPath, 'app/app.xts'));
    if (isXts) {
      return ProjectType.VELA_XTS;
    }
    const isUx = _fsExtra.default.existsSync(_path.default.resolve(projectPath, src, 'app.ux'));
    if (isUx) {
      const mainfest = _fsExtra.default.readJSONSync(_path.default.join(projectPath, src, 'manifest.json'));
      const isVela = mainfest.deviceTypeList?.includes('watch');
      return isVela ? ProjectType.VELA_UX : ProjectType.ANDDROID_UX;
    }
    return ProjectType.VELA_UX;
  }
  _ProjectType.getProjectType = getProjectType;
})(ProjectType || (ProjectType = {}));
var _default = exports.default = ProjectType;