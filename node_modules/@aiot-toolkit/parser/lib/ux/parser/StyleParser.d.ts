import IParser, { ParserResult } from '../../interface/IParser';
import IOptions from '../config/IOptions';
import { IStyleAst } from '../interface/IStyleAst';
import ITranslateOption from '../interface/ITranslateOption';
import { IImageFunction } from '../interface/IImageResource';
import { RawSourceMap, SourceMapConsumer } from 'source-map';
/**
 * StyleParser
 * 1. 根据语言类型分别转为CSS样式
 * 2. 用CSSTREE解析CSS内容
 * 3. 把解析结果转换为目标格式
 */
declare class StyleParser implements IParser<IStyleAst> {
    options: IOptions;
    readonly compilerOption: ITranslateOption;
    collectImageResource: IImageFunction;
    readonly styleLineOffset: number;
    nodeMap: RawSourceMap | string;
    sourceMapConsumer: SourceMapConsumer;
    private styleMapUtil;
    constructor(options: IOptions, compilerOption: ITranslateOption, collectImageResource: IImageFunction, styleLineOffset: number);
    parser(content: string, fileName: string): Promise<ParserResult<IStyleAst>>;
    /**
     * 将Less样式转为CSS
     * @param sourceContent
     * @returns
     */
    private lessToCss;
    /**
     * 将Scss样式转为CSS
     * @param sourceContent
     * @returns
     */
    private scssToCss;
    /**
     * 使用postcss做css样式转换
     * 例如：将@import 转换为引入的内容
     * @param sourceContent
     * @returns
     */
    private parserCss;
    /**
     * 解析CSS语法树的上的节点
     * 1. 将节点按照rule节点、Atrule节点、没有prelude属性的Atrule节点区分
     * 2. 节点内容将按照定义的IRuleType类型返回
     * @param sourceNode
     * @returns
     */
    private parserNode;
    /**
     * 解析rule节点
     * @param sourceNode
     * @returns 返回预定义的RuleType结构
     */
    private paserRuleNode;
    /**
     * 解析一般的Atrule节点
     * @param sourceNode
     * @returns 返回预定义的AtRuleType结构
     */
    private paserAtRuleNode;
    /**
     * 解析没有prelude属性的Atrule节点
     * 1. 处理block中的属性和值的内容
     * @param sourceNode
     * @returns 返回预定义的NoPreludeAtRule结构
     */
    private parserNoPreludeAtRule;
    /**
     * 解析prelude节点
     * 1. SelectorList时，返回选择器列表
     * 2. AtrulePrelude时，返回条件字符串列表
     * @param nodeList
     * @returns
     */
    private parserPrelude;
    /**
     * 解析block结构
     * 生成属性name和value组成的对象列表
     * [
     *  {
     *    name: '',
     *    value: [{value:'', unit:''}, ...]
     *  }, ...
     * ]
     * @param sourceNode
     * @returns
     */
    private parserBlock;
    /**
     * 解析value属性
     * 1. 若value对象有'Children'属性则表示存在值，否则返回空列表
     * 2. 循环Children列表，遇到操作符、Url做特殊处理
     * 3. 其他子项，需要取出value和unit内容
     */
    private parserValue;
    private printError;
}
export default StyleParser;
