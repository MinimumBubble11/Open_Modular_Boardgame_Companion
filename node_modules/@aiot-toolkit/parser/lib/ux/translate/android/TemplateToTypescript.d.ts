import { MapData } from '@aiot-toolkit/shared-utils';
import { SourceFile } from 'ts-morph';
import IOffset from '../../../interface/IOffset';
import ITranslate from '../../../interface/ITranslate';
import IOptions from '../../config/IOptions';
import IImportAst from '../../interface/IImportAst';
import ITemplateAst from '../../interface/ITemplateAst';
import ITranslateOption from '../../interface/ITranslateOption';
/**
 * TemplateToTypescript
 */
declare class TemplateToTypescript implements ITranslate<ITemplateAst, SourceFile> {
    readonly options: IOptions;
    readonly compilerOption: ITranslateOption;
    readonly importList: IImportAst[];
    private _target;
    private _mapList;
    private elementUtil;
    private templateUtil;
    constructor(options: IOptions, compilerOption: ITranslateOption, importList: IImportAst[]);
    translate(sourceTree: ITemplateAst, offsetList: IOffset[]): {
        targetTree: SourceFile;
        mapList: MapData[];
    };
    /**
     * 创建节点对象
     *
     * 1. 创建对象
     * 2. 把对象的属性依次加到sourceFile中，并记录位置
     * 3.
     * @param node
     */
    private translateNoe;
    /**
     * 产物节点添加到代码中，并记录位置映射关系
     *
     * 1. 循环非 children 的属性，依次添加到产物树，并记录位置映射关系
     * 2. 如果 children有值，递归处理 children
     *
     * 此函数修改 this._target 和 this._mapList
     * @param node
     */
    private addTargetNodeToCode;
    /**
     * 创建节点（此函数生成节点，不修改产物树）
     *
     * 1. 元素处理
     *    a. 创建节点
     * 2. 普通属性生成: **属性名需要转成驼峰**
     * 3. 特殊属性处理
     *    a. classList、style、events, 单独赋值
     *    b. dataset 放到attr 中
     *    c. 如果有 id 属性，id在attr同级也要设置
     *    d. for  if 单独处理
     *    e. models 属性转换后放到 events , attr 中
     *
     * 4. 递归子元素生成 children
     * @param node 元素节点
     * @param existingIdentifiers 已存在的标识符列表
     */
    private createTargetNode;
    /**
     * 转换 model 数据
     * 1. 自定义组件转换为
     *    events[update:NAME] = function(evt){ VALUE = evt.detail}
     *    attr[驼峰名称(NAME)] = function(){ return VALUE }
     * 2. 普通组件转换为
     *    events['change'] = function(evt){ VALUE = evt.target.NAME}
     * @param node
     * @param models
     * @returns
     */
    private translateModels;
    /**
     * 预处理属性
     * 1. 特定元素和特定属性处理
     *    a. 特定元素：文本子元素做为 value 属性
     *    b. 特定元素的特定属性：如果是静态路径，加上 require
     * 2. 去除特殊属性
     * 3. 事件、逻辑属性强制设置为动态属性
     * @param node
     */
    private preprocessingProperties;
}
export default TemplateToTypescript;
