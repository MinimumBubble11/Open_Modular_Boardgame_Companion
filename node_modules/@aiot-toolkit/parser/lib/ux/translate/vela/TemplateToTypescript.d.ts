import { MapData } from '@aiot-toolkit/shared-utils';
import { SourceFile } from 'ts-morph';
import IOffset from '../../../interface/IOffset';
import ITranslate from '../../../interface/ITranslate';
import IOptions from '../../config/IOptions';
import ITemplateAst from '../../interface/ITemplateAst';
import ITranslateOption from '../../interface/ITranslateOption';
/**
 * TemplateToTypescript
 */
declare class TemplateToTypescript implements ITranslate<ITemplateAst, SourceFile> {
    readonly options: IOptions;
    readonly compilerOption: ITranslateOption;
    readonly importList?: string[] | undefined;
    private project;
    private _target;
    private _mapList;
    private elementConfigUtil;
    private templateUtil;
    /**
     *
     * @param importList 组件列表
     */
    constructor(options: IOptions, compilerOption: ITranslateOption, importList?: string[] | undefined);
    /**
     *
     * @param sourceTree
     * @param offsetList
     * @returns
     *
     * @see [解析流程](../doc/ux解析流程.md)
     */
    translate(sourceTree: ITemplateAst, offsetList: IOffset[]): {
        targetTree: SourceFile;
        mapList: MapData[];
    };
    private translateNode;
    /**
     * 生成节点表达式
     * @param node
     * @returns
     */
    private createNodeExpression;
    /**
     * 预处理属性
     * 1. 特定元素和特定属性处理
     *    a. 允许设置文字的元素：如果子元素无节点元素， “文本子元素”做为 value 属性. 例如 `<Text>这里全是文字，没有带 tag 的节点</Text>`
     *    b. 特定元素的特定属性：如果是静态路径，加上 require
     * 2. 去除特殊属性
     * 3. 添加特殊属性
     *    a. 添加static: 存在static属性 && 存在动态属性
     * 4. 属性拆分为属性名和修饰符, 并提取修饰符
          a. static 修饰符：如果元素存在 static 属性，则排除全部属性的 static 修饰符
          b. 特殊属性不生成修饰符：[if elif else]--修饰符生成到 ci 中; for-修饰符生成到 cf 中
          c. 其它情况：生成对象 {[属性名]:{修饰符名:true}}
     * 5. 事件、逻辑属性强制设置为动态属性
     * @param node
     * @returns
     */
    private preprocessingProperties;
    /**
     * 创建元素表达式
     *
     * 此方法只创建节点本身的函数
     *
     * 示例：aiot.__ce__("div", {}, [children])
     *
     * 1. 如果是#text 节点，做为<span>文字内容</span> 返回
     * 2. 其它按普通元素处理
     * @param node
     * @returns
     */
    private createElementExpression;
    /**
     * 从节点中提取标识符列表
     *
     * 例如从 <div for="(item, index) in data"/> 提取 item ,index
     *
     * 目前只有一种情况：for
     * @param element
     */
    private getIdentifiersFromNode;
    /**
     * 获取函数调用表达式的名称
     * 1. 无：block**
     * 1. ✓cc: 自定义组件
     * 1. ✓cdc: (is/remotewidget) + component
     * 1. ✓ ce: 一般情况
     * @returns
     */
    private getCallExpressionName;
    /**
     * 是否是自定义组件
     * @param componentName 组件名称
     * @returns
     */
    private isCustomeComponent;
    /**
     * 生成包裹元素
     * 1. 文字：无包裹内容
     * 2. 通过block-cb, for-cf,  if-ci 检查是否有包裹层
     * @param node
     * @param elementExpression
     * @returns
     */
    private createElementWrap;
    /**
     * 提取节点属性信息
     *
     * 1. 根据属性提示属性信息
     * 2. 对于文本类元素，是否有动态属性，还需要检查文本内容。 例如：<text>{{aa}}</text> 也应判定为有动态值
     * @param node
     * @returns
     */
    private extractionAttributeInfomation;
}
export default TemplateToTypescript;
